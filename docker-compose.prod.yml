# docker-compose.prod.yml
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d --build
# Requires: POSTGRES_PASSWORD environment variable (set in .env file or shell)

services:
  hygmap-db:
    # Use alternate port to avoid conflict with host PostgreSQL
    # Only accessible from localhost; PHP container uses internal Docker networking
    ports:
      - "127.0.0.1:15432:5432"
    restart: always

  hygmap-php:
    restart: always
    environment:
      - PHP_INI_SCAN_DIR=/usr/local/etc/php/conf.d:/usr/local/etc/php/production.d